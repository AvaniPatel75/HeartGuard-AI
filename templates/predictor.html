{% extends "layout.html" %}

{% block content %}
<div class="flex h-screen overflow-hidden">
    <!-- Sidebar (Copy from dashboard - ideally use an include but keeping simple for now) -->
    <aside class="w-64 glass border-r hidden md:flex flex-col">
        <div class="p-6 flex items-center space-x-2 border-b border-gray-100">
            <span class="text-2xl">‚ù§Ô∏è</span>
            <span
                class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-accent">HeartGuard</span>
        </div>
        <nav class="flex-1 p-4 space-y-2">
            <a href="/dashboard"
                class="flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-lg transition-colors"><span>üìä</span><span
                    class="font-medium">Dashboard</span></a>
            <a href="/predictor"
                class="flex items-center space-x-3 px-4 py-3 bg-primary/10 text-primary rounded-lg transition-colors"><span>ü©∫</span><span
                    class="font-medium">Predictor</span></a>
            <a href="/profile"
                class="flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-lg transition-colors"><span>üë§</span><span
                    class="font-medium">Profile</span></a>
        </nav>
    </aside>

    <main class="flex-1 overflow-y-auto p-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">AI Risk Predictor</h1>

        <div class="glass p-8 rounded-2xl max-w-4xl mx-auto">
            <form action="/predict" method="POST" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Column 1 -->
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Age (in years)</label>
                        <input type="number" name="age" value="55"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary p-2 border">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Gender</label>
                        <select name="gender"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary p-2 border">
                            <option value="2">Male</option>
                            <option value="1">Female</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Height (cm)</label>
                        <input type="number" name="height" value="175"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary p-2 border">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Weight (kg)</label>
                        <input type="number" name="weight" value="75"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary p-2 border">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Systolic BP (ap_hi)</label>
                        <input type="number" name="ap_hi" value="120"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary p-2 border">
                    </div>
                </div>

                <!-- Column 2 -->
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Diastolic BP (ap_lo)</label>
                        <input type="number" name="ap_lo" value="80"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary p-2 border">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Cholesterol</label>
                        <select name="cholesterol"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary p-2 border">
                            <option value="1">Normal</option>
                            <option value="2">Above Normal</option>
                            <option value="3">Well Above Normal</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Glucose</label>
                        <select name="gluc"
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary p-2 border">
                            <option value="1">Normal</option>
                            <option value="2">Above Normal</option>
                            <option value="3">Well Above Normal</option>
                        </select>
                    </div>
                    <div class="flex items-center space-x-4 pt-4">
                        <label class="flex items-center">
                            <input type="checkbox" name="smoke"
                                class="rounded border-gray-300 text-primary focus:ring-primary h-5 w-5">
                            <span class="ml-2 text-gray-700">Smoker?</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="alco"
                                class="rounded border-gray-300 text-primary focus:ring-primary h-5 w-5">
                            <span class="ml-2 text-gray-700">Alcohol?</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="active" checked
                                class="rounded border-gray-300 text-primary focus:ring-primary h-5 w-5">
                            <span class="ml-2 text-gray-700">Active?</span>
                        </label>
                    </div>
                </div>

                <div class="md:col-span-2 pt-6">
                    <button type="submit"
                        class="w-full bg-gradient-to-r from-primary to-accent text-white font-bold py-3 px-6 rounded-lg shadow-lg transform transition hover:scale-[1.02] hover:shadow-xl">
                        Analyze Assessment
                    </button>
                </div>
            </form>

            {% if result %}
            <div
                class="mt-8 p-6 rounded-xl {% if result.risk == 'High' %}bg-red-50 border border-red-200{% else %}bg-green-50 border border-green-200{% endif %} animate-fade-in-up">
                <h3
                    class="text-xl font-bold {% if result.risk == 'High' %}text-red-800{% else %}text-green-800{% endif %}">
                    Result: {{ result.risk }} Risk
                </h3>
                <p class="mt-2 text-gray-700">Probability: <strong>{{ result.prob }}%</strong></p>
                <p class="mt-2 text-sm text-gray-600">{{ result.suggestion }}</p>
            </div>
            {% endif %}
        </div>
    </main>
</div>
{% endblock %}